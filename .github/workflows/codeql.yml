# Run Psalm Shared Workflow
name: "CodeQL"

on:
  push:
    branches: [ master ]
  pull_request:
    branches: '*'
  schedule:
    - cron: '30 12 1,15 * *'

jobs:
  analyze:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    name: Analyze PHP 

    steps:
      - uses: actions/checkout@v3
        name: Check Out Code

      - name: Psalm
        uses: docker://ghcr.io/psalm/psalm-github-actions
+       with:
+         security_analysis: true
+         report_file: psalm-report.sarif

      - name: Upload SARIF report
        uses: github/codeql-action/upload-sarif@v3
        with:
          sarif_file: psalm-report.sarif